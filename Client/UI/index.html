<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- =====================================================
         META / BASE CONFIG
    ====================================================== -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- =====================================================
         STYLES
    ====================================================== -->
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <!-- =====================================================
         COUNTDOWN OVERLAY
         Fullscreen overlay used for match countdown
    ====================================================== -->
    <div id="countdown-overlay" class="countdown-overlay">
      <span id="countdown-number">0</span>
    </div>

    <!-- =====================================================
         HUD — TIMER & SCORE
         Always visible during gameplay
    ====================================================== -->
    <div id="timer-container" class="timer-container">
      <!-- Team A Score (Blue) -->
      <span id="team-a-score" class="score score-left">0</span>

      <!-- Match Timer -->
      <span id="timer" class="timer">00:00</span>

      <!-- Team B Score (Orange / Red) -->
      <span id="team-b-score" class="score score-right">0</span>
    </div>

    <!-- =====================================================
         GOAL BANNER
         Central animated stripe when a goal is scored
    ====================================================== -->
    <div id="score-container" class="score-container">
      <span class="goal-text">GOAL!</span>
    </div>

    <!-- =====================================================
         GOAL PLAYER CARD
         Separate component (not nested) to avoid transform
         and z-index conflicts with the banner
    ====================================================== -->
    <div id="goal-player-card" class="goal-player-card">
      <img
        id="goal-player-avatar"
        class="goal-player-avatar"
        alt="Player Avatar"
      />
      <span id="goal-player-name"></span>
    </div>

    <!-- =====================================================
         LIBRARIES
         Must be loaded BEFORE any GSAP timeline
    ====================================================== -->
    <script src="https://unpkg.com/gsap@3/dist/gsap.min.js"></script>

    <!-- =====================================================
         COUNTDOWN ANIMATION TIMELINES
    ====================================================== -->
    <script>
      /* -----------------------------------------------------
         COUNTDOWN OVERLAY — ENTER
      ----------------------------------------------------- */
      window.countdownInTl = gsap.timeline({ paused: true })
      countdownInTl.to('#countdown-overlay', {
        autoAlpha: 1,
        duration: 0.25,
        ease: 'power2.out',
      })

      /* -----------------------------------------------------
         COUNTDOWN OVERLAY — EXIT
      ----------------------------------------------------- */
      window.countdownOutTl = gsap.timeline({ paused: true })
      countdownOutTl.to('#countdown-overlay', {
        autoAlpha: 0,
        duration: 0.35,
        ease: 'power3.in',
      })

      /* -----------------------------------------------------
         COUNTDOWN NUMBER — PER SECOND TICK
      ----------------------------------------------------- */
      window.countdownTickTl = gsap.timeline({ paused: true })
      countdownTickTl
        .fromTo(
          '#countdown-number',
          {
            scale: 0.7,
            opacity: 0,
            // filter removed for performance
          },
          {
            scale: 1,
            opacity: 1,
            duration: 0.28,
            ease: 'power3.out',
          }
        )
        .to('#countdown-number', {
          scale: 1.08,
          duration: 0.28,
          ease: 'sine.out',
        })
        .to('#countdown-number', {
          scale: 1,
          duration: 0.2,
          ease: 'power2.in',
        })
    </script>

    <!-- =====================================================
         TIMER INTRO ANIMATION
         Played once when HUD becomes visible
    ====================================================== -->
    <script>
      window.timerTl = gsap.timeline()

      timerTl.from('#timer', {
        y: -12,
        opacity: 0,
        scale: 0.9,
        duration: 0.8,
        ease: 'elastic.out(1, 0.6)',
      })
    </script>

    <!-- =====================================================
         GOAL BANNER ANIMATION
         Controls enter → impact → idle → exit
    ====================================================== -->
    <script>
      window.goalTl = gsap.timeline({ paused: true })

      /* =====================
         ENTER STRIPE
      ===================== */
      goalTl.to('#score-container', {
        scaleY: 1,
        duration: 0.4,
        ease: 'power4.out',
      })

      /* =====================
         TEXT IMPACT
      ===================== */
      goalTl.fromTo(
        '#score-container span',
        {
          letterSpacing: '64px',
          scaleX: 1.4,
        },
        {
          letterSpacing: '8px',
          scaleX: 1,
          duration: 0.8,
          ease: 'elastic.out(1, 0.45)',
        },
        '-=0.2'
      )

      /* =====================
         IDLE LOOP (VISIBLE)
      ===================== */
      goalTl.to('#score-container span', {
        scaleX: 1.25,
        duration: 0.9,
        ease: 'sine.inOut',
        repeat: -1,
        yoyo: true,
      })

      /* =====================
         HOLD TIME
      ===================== */
      goalTl.to({}, { duration: 5 })

      /* =====================
         EXIT STRIPE
      ===================== */
      goalTl.to('#score-container', {
        scaleY: 0,
        duration: 0.35,
        ease: 'power3.in',
      })
    </script>

    <!-- =====================================================
         GOAL PLAYER CARD ANIMATION
         Independent timeline to avoid transform inheritance
    ====================================================== -->
    <script>
      window.goalPlayerTl = gsap.timeline({ paused: true })

      goalPlayerTl
        .fromTo(
          '#goal-player-card',
          {
            opacity: 0,
            y: -8,
            scale: 0.96,
          },
          {
            opacity: 1,
            y: 0,
            scale: 1,
            duration: 0.35,
            ease: 'power3.out',
            delay: 0.75,
          }
        )
        .to({}, { duration: 4.5 })
        .to('#goal-player-card', {
          opacity: 0,
          y: -6,
          scale: 0.96,
          duration: 0.35,
          ease: 'power3.in',
          delay: 0.75,
        })
    </script>

    <!-- =====================================================
         GAME / HUD LOGIC
         Handles events, state, and data binding
    ====================================================== -->
    <script src="index.js"></script>
  </body>
</html>
